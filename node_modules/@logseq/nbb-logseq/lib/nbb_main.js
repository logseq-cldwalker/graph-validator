#!/usr/bin/env node


import { $APP, shadow$provide, $jscomp } from "./nbb_api.js";
import  "./nbb_impl_main.js";
import  "./nbb_core.js";
const shadow_esm_import = function(x) { return import(x) };
'use strict';var KGa=function(a){return $APP.k($APP.Dy.existsSync(a))?$APP.n.g($APP.Dy.readFileSync(a)):null},ZU=function(a){console.error($APP.mr.h(" ",a))},LGa=function(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;ZU(0<b.length?new $APP.Bd(b.slice(0),0,null):null)},MGa=function(a){var b=$APP.R.g(a);return $APP.k(b)?$APP.K.j(a,$APP.R,b.df(null)):a},NGa=function(a,b){b-=$APP.fe(a);return[$APP.n.g(a),$APP.mr.g($APP.Tt.h(b," "))].join("")},$U=function(a){ZU($APP.D([$APP.Ih.R($APP.n,
"----- ",a," ",$APP.Tt.h(43-$APP.fe(a),"-"))]))},OGa=function(a){return $APP.bk(a,new $APP.H(null,8,5,$APP.I,[$APP.R,$APP.Q,$APP.npa,$APP.mo,$APP.no,$APP.rp,$APP.fu,$APP.xs],null))},PGa=function(a){var b=function(){var e=$APP.we(a);return $APP.k(e)?e:a}(),c=$APP.Se(a)?$APP.v(a):null,d=function(){var e=$APP.Jv.g(b);return $APP.k(e)?e:null==c?null:$APP.we(c)}();d=$APP.z.h($APP.bu,$APP.au.g(d))?$APP.K.j(d,$APP.R,$APP.R.g(b)):d;return $APP.fi.h($APP.jh,new $APP.H(null,2,5,$APP.I,[OGa(b),OGa(d)],null))},
QGa=function(a){a=$APP.el(a);a=$APP.Ru.h(function(c){var d=$APP.ih(c);c=$APP.af.h(d,$APP.Q);var e=$APP.af.h(d,$APP.mo),f=$APP.af.h(d,$APP.R),l=$APP.af.h(d,$APP.no),m=$APP.af.h(d,$APP.rp),q=$APP.af.h(d,$APP.fu);d=$APP.af.h(d,$APP.npa);return $APP.k($APP.k(l)?l:q)?new $APP.h(null,2,[$APP.Q,[$APP.n.g($APP.k(c)?[$APP.n.g(f),"/",$APP.n.g(c)].join(""):f),$APP.k(d)?["#",$APP.n.g(d)].join(""):null].join(""),$APP.dr,[$APP.n.g($APP.k(e)?e:$APP.k(q)?"\x3cbuilt-in\x3e":"\x3cexpr\x3e"),$APP.k(l)?[":",$APP.n.g(l),
":",$APP.n.g(m)].join(""):null].join("")],null):null},a);var b=$APP.nf.j($APP.Ep,0,$APP.Mk.h($APP.cv.h($APP.fe,$APP.Q),a));return $APP.Mk.h(function(c){var d=$APP.ih(c);c=$APP.af.h(d,$APP.Q);d=$APP.af.h(d,$APP.dr);var e=b-$APP.fe(c);return[[$APP.n.g(c),$APP.mr.g($APP.Tt.h(e," "))].join("")," - ",$APP.n.g(d)].join("")},a)},RGa=function(a){a=$APP.p(a);a=$APP.gE.g(a);var b=$APP.bi.l(PGa,$APP.D([a]));a=$APP.nf.j(function(c,d){var e=$APP.B.j(c,0,null),f=$APP.B.j(c,1,null),l=$APP.B.j(c,2,null),m=$APP.B.j(c,
3,null);c=function(){var A=$APP.Q.g(d);return $APP.k(A)?A:m}();var q=function(){var A=$APP.mo.g(d);return $APP.k(A)?A:f}();l=l===$APP.R.g(d)?$APP.K.l(d,$APP.Q,c,$APP.D([$APP.mo,q])):d;return new $APP.H(null,4,5,$APP.I,[$APP.wg.h(e,l),q,$APP.R.g(d),c],null)},function(){var c=$APP.v(b);return new $APP.H(null,4,5,$APP.I,[$APP.Ed,$APP.mo.g(c),$APP.R.g(c),$APP.Q.g(c)],null)}(),b);return $APP.et.h(MGa,$APP.v(a))},SGa=function(a){a=null==a?null:$APP.im(a);a=null==a?null:$APP.Ds.g(a);return null==a?null:
RGa(a)},TGa=function(a){a=$APP.Vk.g(a);var b=$APP.Gg(a)?$APP.Vk.h($APP.n.g(a),"-main"):a,c=$APP.Cg(b);return $APP.gn("(require '$1) (apply $2 *command-line-args*)",/\$(\d)/,function(d){d=$APP.ke(d);switch(d){case "1":return c;case "2":return b;default:throw Error(["No matching clause: ",$APP.n.g(d)].join(""));}})},UGa=function(a){for(var b=$APP.hh,c=a;;)if($APP.k(c)){var d=$APP.v(c);a=$APP.y(c);switch(d){case "--help":case "-h":return $APP.K.j(b,$APP.SDa,!0);case "--version":case "-v":return $APP.K.j(b,
$APP.RDa,!0);case "-e":b=$APP.K.j(b,$APP.zq,$APP.v(a));c=a=$APP.y(a);continue;case "-m":case "--main":return $APP.K.l(b,$APP.zq,TGa($APP.v(a)),$APP.D([$APP.sO,$APP.y(a)]));case "-cp":case "--classpath":b=$APP.K.j(b,$APP.bT,$APP.v(a));c=a=$APP.y(a);continue;case "--debug":b=$APP.K.j(b,$APP.fT,!0);c=a;continue;case "nrepl-server":b=$APP.K.j(b,$APP.yU,!0);c=a;continue;case "socket-repl":b=$APP.K.j(b,$APP.zU,!0);c=a;continue;case ":port":case "--port":b=$APP.K.j(b,$APP.dT,$APP.v(a));c=a=$APP.y(a);continue;
case ":host":case "--host":b=$APP.K.j(b,$APP.ABa,$APP.v(a));c=a=$APP.y(a);continue;case "repl":b=$APP.K.j(b,$APP.VDa,!0);c=a;continue;default:if($APP.lb($APP.zq.g(c)))return $APP.K.l(b,$APP.UDa,d,$APP.D([$APP.sO,$APP.y(c)]));throw $APP.po.h(["Unrecognized options:",$APP.n.g(c)].join(""),$APP.hh);}}else return b},VGa=function(a,b){if($APP.k(b))return new $APP.H(null,1,5,$APP.I,[a],null);b=$APP.fe(a);return 10>=b?new $APP.H(null,1,5,$APP.I,[a],null):new $APP.H(null,2,5,$APP.I,[$APP.Xh.h(5,a),$APP.Sh.h(b-
5,a)],null)},WGa=function(a){var b=$APP.ih($APP.im(a)),c=$APP.af.h(b,$APP.mo),d=$APP.af.h(b,$APP.no);b=$APP.af.h(b,$APP.rp);if($APP.k($APP.k(c)?d:c)&&(c=KGa(c),$APP.k(c))){var e=d-1;d=function(){var l=e-4;return 0<l?l:0}();c=$APP.Yh(e-d+1,$APP.Xh.h(e+6-d,$APP.Sh.h(d,$APP.uD.h($APP.M,$APP.pn(c)))));d=$APP.B.j(c,0,null);c=$APP.B.j(c,1,null);a=$APP.N.l(d,new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[null,[$APP.mr.h("",$APP.Tt.h(b-1," ")),["^--- ",$APP.n.g($APP.jm(a))].join("")].join("")],null)],
null),$APP.D([c]));b=$APP.Mk.h($APP.v,a);var f=$APP.nf.j($APP.Ep,0,$APP.Mk.h($APP.cv.h($APP.fe,$APP.n),b));a=$APP.Mk.h(function(l){var m=$APP.B.j(l,0,null);l=$APP.B.j(l,1,null);return $APP.k(m)?[$APP.n.g([$APP.n.g(m+1),":"].join("").padStart(f,"0"))," ",$APP.n.g(l)].join(""):[$APP.mr.g($APP.Tt.h(2+f," ")),$APP.n.g(l)].join("")},a);return $APP.mr.h("\n",a)}return null},XGa=function(a){var b=$APP.nf.j($APP.Ep,0,$APP.Mk.h($APP.cv.h($APP.fe,$APP.n),$APP.Wj(a)))+2;ZU($APP.D([function(){var c=new $APP.Qa,
d=$APP.bb,e=$APP.cb;$APP.bb=!0;$APP.cb=function(va){return c.append(va)};try{var f=$APP.$a,l=$APP.Gk;$APP.$a=10;$APP.Gk=2;try{for(var m=$APP.u(a),q=null,A=0,x=0;;)if(x<A){var C=q.fa(null,x),t=$APP.B.j(C,0,null),J=$APP.B.j(C,1,null);$APP.aE.l($APP.D([NGa([$APP.n.g(t),": "].join(""),b)]));$APP.cE.l($APP.D([J]));x+=1}else{var O=$APP.u(m);if(O){var U=O;if($APP.Ie(U)){var Z=$APP.bd(U),oa=$APP.cd(U);U=Z;var qa=$APP.fe(Z);m=oa;q=U;A=qa}else{var sa=$APP.v(U),Aa=$APP.B.j(sa,0,null),Ea=$APP.B.j(sa,1,null);
$APP.aE.l($APP.D([NGa([$APP.n.g(Aa),": "].join(""),b)]));$APP.cE.l($APP.D([Ea]));m=$APP.y(U);q=null;A=0}x=0}else break}}finally{$APP.Gk=l,$APP.$a=f}}finally{$APP.cb=e,$APP.bb=d}return $APP.n.g(c)}()]))},YGa=function(a){var b=$APP.ih(null);b=$APP.af.h(b,$APP.TDa);a=QGa(a);b=VGa(a,b);a=$APP.B.j(b,0,null);b=$APP.B.j(b,1,null);$APP.jl(function(c){return $APP.aE.l($APP.D([c,"\n"]))},a);$APP.k(b)&&($APP.aE.l($APP.D(["...\n"])),$APP.jl(function(c){return $APP.aE.l($APP.D([c,"\n"]))},b))},ZGa=function(a,
b){var c=SGa(a),d=$APP.im(a),e=$APP.Hl($APP.ko.g(d));$U("Error");var f=a.name;$APP.k(f)&&($APP.z.h("Error",f)||ZU($APP.D(["Type:    ",f])));f=a.message;$APP.k(f)&&ZU($APP.D([["Message:  ",$APP.n.g(f)].join("")]));$APP.k($APP.fT.g(b))&&(f=$APP.im($APP.km(a)),$APP.k(f)&&($APP.aE.l($APP.D(["Data:     "])),$APP.cE.l($APP.D([f]))));var l=$APP.ih(d);f=$APP.af.h(l,$APP.mo);var m=$APP.af.h(l,$APP.no);l=$APP.af.h(l,$APP.rp);$APP.k(m)&&ZU($APP.D([["Location: ",$APP.k(f)?[$APP.n.g(f),":"].join(""):null,$APP.n.g(m),
":",$APP.n.g(l),""].join("")]));f=$APP.Zt.g(d);$APP.k(f)&&ZU($APP.D(["Phase:   ",f]));a=e?WGa(a):null;$APP.k(a)&&(LGa(),$U("Context"),ZU($APP.D([a])));$APP.k($APP.fT.g(b))&&(b=$APP.jh($APP.WDa.g(d)),$APP.k(b)&&($U("Locals"),XGa(b)));e&&(e=function(){var q=function(){var A=new $APP.Qa,x=$APP.bb,C=$APP.cb;$APP.bb=!0;$APP.cb=function(t){return A.append(t)};try{$APP.k(c)&&YGa(c)}finally{$APP.cb=C,$APP.bb=x}return $APP.n.g(A)}();return $APP.vn(q)?null:q}(),$APP.k(e)&&(LGa(),$U("Stack trace"),ZU($APP.D([e]))))},
$Ga=function(){var a=$APP.u(process.argv);$APP.v(a);a=$APP.y(a);$APP.v(a);a=$APP.y(a);var b=UGa(a);$APP.Nh($APP.XDa,b);a=$APP.UDa.g(b);var c=$APP.zq.g(b),d=$APP.bT.g(b),e=process.cwd();$APP.qr(e);$APP.k(d)&&$APP.qr(d);d=$APP.yU.g(b);e=function(){var f=$APP.VDa.g(b);if($APP.k(f))return f;f=$APP.zU.g(b);return $APP.k(f)?f:$APP.ze($APP.fo.l(b,$APP.bT,$APP.D([$APP.fT])))}();$APP.k($APP.SDa.g(b))&&($APP.bE.l($APP.D([$APP.Pa("nbb"),"version:",$APP.Wy()])),$APP.bE.l($APP.D(["\nHelp:\n\n -h / --help: print this help text and exit.\n -v / --version: print the current version of nbb.\n\nGlobal options:\n\n --debug: print additional debug info.\n -cp / --classpath: set the classpath.\n\nEvaluation:\n\n -e: execute expression.\n -m / --main: execute main function.\n\nREPL:\n\n repl: start console REPL.\n nrepl-server: start nrepl server. [1,2]\n socket-repl: start socket repl server. [1]\n\n 1: Provide :port \x3cport\x3e to specify port.\n 2: Provide :host \x3chost\x3e to specify host.\n"])),
process.exit(0));$APP.k($APP.RDa.g(b))&&($APP.bE.l($APP.D([["nbb v",$APP.Wy()].join("")])),process.exit(0));$APP.Nh($APP.WQ,b);$APP.k(e)&&$APP.XS($APP.nr.resolve("script.cljs"));$APP.k($APP.k(a)?a:$APP.k(c)?c:$APP.k(d)?d:e)?($APP.UQ.h($APP.Iza,$APP.Lh($APP.sO.g(b))),($APP.k(a)?$APP.uBa(a):$APP.k(c)?$APP.vBa(c):$APP.k($APP.yU.g(b))?shadow_esm_import("./nbb_nrepl_server.js"):$APP.k($APP.k(e)?$APP.zU.g(b):e)?shadow_esm_import("./nbb_repl.js").then(function(){var f=new $APP.h(null,1,[$APP.dT,$APP.dT.g(b)],
null),l=$APP.af.h($APP.af.h($APP.qs.g($APP.p($APP.ns.g($APP.p($APP.Zx)))),$APP.zJ),$APP.cT);return l.g?l.g(f):l.call(null,f)}):$APP.k(e)?shadow_esm_import("./nbb_repl.js").then(function(){var f=$APP.af.h($APP.af.h($APP.qs.g($APP.p($APP.ns.g($APP.p($APP.Zx)))),$APP.zJ),$APP.eT);return f.F?f.F():f.call(null)}):null).then(function(f){$APP.k($APP.k(c)?null!=f:c)&&$APP.cE.l($APP.D([f]));return f}).catch(function(f){ZGa(f,b);$APP.k($APP.fT.g(b))&&console.error($APP.n.g(f));throw Error($APP.jm(f));})):console.error("Usage: nbb \x3cscript\x3e or nbb -e \x3cexpr\x3e.")};process.on("unhandledRejection",function(a){console.error($APP.jm(a));return process.exitCode=1});try{$Ga()}catch(a){throw console.error("An error occurred when calling (nbb.main/main)"),a;};
export { $APP, shadow$provide, $jscomp };
